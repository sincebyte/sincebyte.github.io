[{"authors":[],"categories":[],"content":"mac stage manager æä¾›äº†ä¸€ä¸ªçœŸæ­£æ— æ‰“æ‰°çš„å·¥ä½œç¯å¢ƒ.\nTable of Contents æœ€è¿‘ä½¿ç”¨ macos çš„ stage manager, æ„Ÿè§‰ååˆ†æ¸…çˆ½. stage manager æä¾›äº†ä¸€ä¸ªçœŸæ­£æ— æ‰“æ‰°çš„ç¯å¢ƒ, åœ¨æ­¤æ¨¡å¼ä¸‹å¯ä»¥å±è”½å…¶ä»–çš„çª—å£, åªæ˜¾ç¤ºå½“å‰çª—å£. ç”šè‡³å¯ä»¥å±è”½æ¡Œé¢çš„æ–‡ä»¶, å› æ­¤å¥½çœ‹çš„å£çº¸å¯ä»¥ â€œæ— æ±¡æŸ“â€ çš„å±•ç¤ºäº†. ä¸è¿‡éå¸¸å¯æƒœçš„æ˜¯, stage manager æœªæä¾›åˆ‡æ¢ä¸åŒ application çš„å¿«æ·é”®è®¾ç½®. å€˜è‹¥ä½¿ç”¨ Alfred ç­‰è½¯ä»¶åˆæ— æ³•ä¸€é”®åˆ‡æ¢åº”ç”¨, å¹¸è¿çš„æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ mac æä¾›çš„ Automator æ¥å®ç°ä¸€é”®åˆ‡æ¢åº”ç”¨.\né¦–å…ˆ, æ‰“å¼€ Automator.app \u0026gt; File new (command N) \u0026gt; Quick Action \u0026gt; Run AppleScript\nè¾“å…¥å¦‚ä¸‹ä»£ç , å¹¶ä½¿ç”¨æ’­æ”¾æŒ‰é”®, è¿›è¡Œç®€å•æµ‹è¯•. å¦‚æœèƒ½æˆåŠŸåˆ‡æ¢è‡³ Emacs è¯´æ˜ç¨‹åºç”Ÿæ•ˆäº†.\næ¥ä¸‹æ¥å°†æ­¤ Automator ç¨‹åºä¿å­˜å¹¶å‘½å OpenEmacs\n1 on run {input, parameters} 2 3 (* Your script goes here *) 4 tell application \u0026quot;Emacs\u0026quot; 5 activate 6 end tell 7 8 end run å…¶æ¬¡,æˆ‘ä»¬ä¸º OpenEamcs è®¾ç½®ä¸€ä¸ªå¿«æ·é”®. æ‰“å¼€ System Settings.app \u0026gt; Keyboard \u0026gt; Keyboard Shortcuts \u0026gt; Service \u0026gt; General\né€‰æ‹© OpenEmacs å¹¶è®¾ç½®å¿«æ·é”®. ä¿å­˜åä½¿ç”¨å¿«æ·é”®è¿›è¡Œæµ‹è¯•.\næˆ‘è‡ªå·±å°† command + R è®¾ç½®ä¸º Chrome çš„å¿«æ·é”®. å°† command + K è®¾ç½®ä¸º Emacs çš„å¿«æ·é”®.\næ³¨æ„ Keyboard çš„å¿«æ·é”®å¯èƒ½å’Œç³»ç»Ÿçš„å¿«æ·é”®ä»¥åŠå’Œappå†…ç½®çš„å¿«æ·é”®å†²çª,\nç»æµ‹è¯•å‘ç° Keyboard çš„å¿«æ·é”®æœ‰å…ˆçº§æ¯”è¾ƒä½, å¦‚è¿‡å†²çªåˆ™æŒ‰é”®äº‹ä»¶æ— æ³•æŠµè¾¾ Automator.\nå› æ­¤éœ€è¦æ ¹æ®å¤§å®¶çš„åº”ç”¨æƒ…å†µè®¾ç½®åˆç†çš„å¿«æ·é”®\n","permalink":"/posts/stage%E5%BF%AB%E6%8D%B7%E9%94%AE/","series":[],"tags":[],"title":"Stageå¿«æ·é”®"},{"authors":[],"categories":[],"content":"æ˜¯ä¸€æ¬¾è„šæœ¬ç»˜å›¾è¯­è¨€ç¨‹åº, æä¾›ä¸°å¯Œçš„ç‰¹æ€§, å…¶ä¸­æˆ‘æœ€å–œæ¬¢çš„åŠŸèƒ½åŒ…æ‹¬å¯ç”Ÿæˆç®­å¤´æµåŠ¨æ•ˆæœ\nTable of Contents Introduction Usage Org mode TALA License Introduction D2 æ˜¯ä¸€æ¬¾è„šæœ¬ç»˜å›¾è¯­è¨€ç¨‹åº, æä¾›ä¸°å¯Œçš„ç‰¹æ€§ , å…¶ä¸­æˆ‘æœ€å–œæ¬¢çš„åŠŸèƒ½åŒ…æ‹¬å¯ç”Ÿæˆç®­å¤´æµåŠ¨æ•ˆæœ,ç®€æ´çš„è¯­æ³•, é¿å…ä½¿ç”¨ quote (å¼•å·) å¯¹ç©ºæ ¼çš„æ”¯æŒ, å¤šç±»å‹çš„å¸ƒå±€ç­‰ç­‰, æˆ‘ä»¬é¦–å…ˆè¯´ä¸‹ D2 çš„å¸ƒå±€, ä¸€å…±åˆ†ä¸º3ç§å¸ƒå±€\ndagre ,ä¸€ç§æœ‰å‘å›¾, åŸºäº Graphvizâ€™s DOT ç®—æ³•ä¸å¸ƒå±€, å¦‚æœä½ å¾ˆç†Ÿæ‚‰dot ä¸å¦¨è¯•è¯•è¿™ç§å¸ƒå±€ ELK ,ä¹Ÿæ˜¯ä¸€ç§æœ‰å‘å›¾, ä½†å®˜æ–¹å®£ç§°æ¯”dagreæ›´æˆç†Ÿ TALA, å…¨æ–°çš„ ä»˜è´¹ å¸ƒå±€å¼•æ“, å®˜æ–¹å®£ç§°æ˜¯ç‰¹åˆ«é’ˆå¯¹è½¯ä»¶æ¡†æ¶å›¾è€Œè®¾è®¡çš„å¸ƒå±€ ç»¼åˆæ¥è¯´, å…¶å®å®˜æ–¹ä¹Ÿæ²¡è¯´çš„å¾ˆæ˜ç™½,ä¸è¿‡ç”±äº TALA æ˜¯ä»˜è´¹çš„å¸ƒå±€,æœ‰ä¸“é—¨çš„ç½‘ç«™å’Œæ¼”ç¤ºæ¡ˆä¾‹. ç¡®å®è®©äººå¿ƒåŠ¨.å¹¸è¿çš„æ˜¯è™½è¯´ TALA æ˜¯ä»˜è´¹çš„,ä½†ä»–å´æä¾›è½¯ä»¶çš„æºä»£ç ,æˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨ TALA å¸ƒå±€åªä¸è¿‡åœ¨ç”Ÿæˆå‡ºæ¥çš„å›¾ç‰‡ä¸­å«æœ‰ LICENSE COPY çš„æ°´å°ï¼ˆåé¢è®²æ€ä¹ˆå»é™¤ï¼‰.\nUsage ä½ çš„ç¬¬ä¸€ä¸ªD2æ¶æ„å›¾,ä»£ç å¦‚ä¸‹.\ndirection ä»£è¡¨äº†å¸ƒå±€çš„æ–¹å‘, style.fill ä»£è¡¨äº†èƒŒæ™¯å›¾ä¸ dot å’Œ plantuml ä¸€æ ·,éƒ½å¯ä»¥æ”¯æŒé€æ˜èƒŒæ™¯ transparent. d2æ”¯æŒæˆ‘ä»¬å®šä¹‰ä¸€äº›é¢„ç½®çš„ class æ ·å¼,è§classesä»£ç ç‰‡æ®µ. è¿æ¥çº¿çš„æ ·å¼ä¸­æœ‰æˆ‘ä»¬å–œé—»ä¹è§çš„ style.animated è¿™å°±æ˜¯è¿æ¥çº¿åŠ¨æ€æ•ˆæœçš„è®¾ç½®. åœ¨æœ€æ–°çš„ v0.6.0 ä¸­,å¯ä»¥é€šè¿‡åœ¨varså¯¹è±¡ä¸­çš„é”®å€¼å¯¹æ¥ç”³æ˜å˜é‡,è¿™æå¤§æ–¹ä¾¿äº†æˆ‘ä»¬åœ¨ç”»å›¾æ—¶å¯¹é¢œè‰²å’Œå±æ€§çš„é‡å¤å¼•ç”¨. åœ¨æœ€æ–°çš„ v0.6.0 ä¸­,å¯ä»¥ä½¿ç”¨é€šé…ç¬¦æ¥æŒ‡å®šèŠ‚ç‚¹çš„æ ·å¼ *.style.fillï¼ˆç›®å‰ä»…é’ˆæ”¯æŒèŠ‚ç‚¹,ä¸æ”¯æŒè¿æ¥çº¿ï¼‰. æ¥ä¸‹æ¥æˆ‘å£°æ˜äº†Aã€Bã€C 3ä¸ªèŠ‚ç‚¹,å¹¶ä¸”åˆ†åˆ«å¼•ç”¨ 2dn(2d node) å’Œ 3dn(3d node).\ndirection : right style.fill : transparent vars: { nodecolor : \u0026quot;#E67E22\u0026quot; style-stroke : \u0026quot;#17202A\u0026quot; style-stroke-width : 2 style-fill-pattern : dots style-shadow : true line-style-fill : \u0026quot;#884EA0\u0026quot; } classes: { 2dn: { style.multiple : true } 3dn: { style.3d : true } 2de: { style.animated : true style.stroke-width : ${style-stroke-width} style.stroke : ${line-style-fill} } } A : { class : 2dn } B : { class : 3dn } C : { class : 3dn } A -\u0026gt; B -\u0026gt; C -\u0026gt; D{ class : 2de } *.style.fill : ${nodecolor} *.style.stroke : ${style-stroke} *.style.stroke-width : ${style-stroke-width} *.style.fill-pattern : ${style-fill-pattern} *.style.shadow : ${style-shadow} Org mode æœ€ååˆ†äº«å¦‚ä½•åœ¨ org mode ä¸­ä½¿ç”¨d2.\nåœ¨ org mode ä¸­å¼•å…¥æ–°çš„ src block æ‰§è¡Œä»£ç å—,ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ä½œä¸ºå‚è€ƒ.æˆ‘åœ¨è¿™é‡Œå¢åŠ äº†d2çš„æ‰‹ç»˜é£æ ¼çš„ä»£ç ,å…¶åŸå› æ˜¯d2çš„éƒ¨åˆ†è®¾ç½®éœ€è¦åœ¨å‘½ä»¤è¡Œä¸Šè¿›è¡Œè®¾ç½®.ç±»ä¼¼äºå›¾ç‰‡é—´å®½ã€å¸ƒå±€å¼•æ“ã€åŠ¨ç”»é€Ÿç‡ç­‰å‚æ•°å‡æ˜¯é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æ¥è®¾ç½®çš„,æ— æ³•åœ¨src blockå†…è¿›è¡Œè®¾å®š.å› æ­¤æˆ‘åœ¨fishå†…å¢åŠ äº†è½¯è¿æ¥å¸¦å…¥é»˜è®¤å‚æ•°,ä»¥æ­¤æ¥å®ç°åœ¨org modeä¸­è¿›è¡Œä¸åŒé£æ ¼çš„d2è®¾ç½®åˆ‡æ¢.\nalias ds2 \u0026quot;~/soft/d2-v0.6.0/bin/d2 --sketch --animate-interval=1400 -l elk -c --pad 0\u0026quot; ;;; ds2.el --- Babel Functions for ds2 -*- lexical-binding: t; -*- ;; Copyright (C) 2009-2022 Free Software Foundation, Inc. ;; Author: Eric Schulte ;; Maintainer: Justin Abrahms \u0026lt;justin@abrah.ms\u0026gt; ;; Keywords: literate programming, reproducible research ;; URL: https://orgmode.org ;; This file is part of GNU Emacs. ;; GNU Emacs is free software: you can redistribute it and/or modify ;; it under the terms of the GNU General Public License as published by ;; the Free Software Foundation, either version 3 of the License, or ;; (at your option) any later version. ;; GNU Emacs is distributed in the hope that it will be useful, ;; but WITHOUT ANY WARRANTY; without even the implied warranty of ;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the ;; GNU General Public License for more details. ;; You should have received a copy of the GNU General Public License ;; along with GNU Emacs. If not, see \u0026lt;https://www.gnu.org/licenses/\u0026gt;. ;;; Commentary: (require 'org-macs) (org-assert-version) (defvar org-babel-default-header-args:ds2 '((:results . \u0026quot;file\u0026quot;) (:exports . \u0026quot;results\u0026quot;)) \u0026quot;Default arguments to use when evaluating a ds2 source block.\u0026quot;) (defun org-babel-expand-body:ds2 (body params) \u0026quot;Expand BODY according to PARAMS, return the expanded body.\u0026quot; (let ((vars (org-babel--get-vars params))) (mapc (lambda (pair) (let ((name (symbol-name (car pair))) (value (cdr pair))) (setq body (replace-regexp-in-string (concat \u0026quot;$\u0026quot; (regexp-quote name)) (if (stringp value) value (format \u0026quot;%S\u0026quot; value)) body t t)))) vars) body)) (defun org-babel-execute:ds2 (body params) \u0026quot; This function is called by `org-babel-execute-src-block'.\u0026quot; (let* ((out-file (cdr (or (assq :file params) (error \u0026quot;You need to specify a :file parameter\u0026quot;)))) (cmdline (or (cdr (assq :cmdline params)))) (cmd (or (cdr (assq :cmd params)) (concat \u0026quot;ds2 \u0026quot; \u0026quot;\u0026quot;))) (coding-system-for-read 'utf-8) ;use utf-8 with sub-processes (coding-system-for-write 'utf-8) (in-file (org-babel-temp-file \u0026quot;ds2-\u0026quot;))) (with-temp-file in-file (insert (org-babel-expand-body:ds2 body params))) (org-babel-eval (concat cmd \u0026quot; \u0026quot; (org-babel-process-file-name in-file) \u0026quot; \u0026quot; cmdline \u0026quot; \u0026quot; (org-babel-process-file-name out-file)) \u0026quot;\u0026quot;) nil)) ;; signal that output has already been written to file (defun org-babel-prep-session:ds2 (_session _params) \u0026quot;Return an error because ds2 does not support sessions.\u0026quot; (error \u0026quot;ds2 does not support sessions\u0026quot;)) (provide 'ds2) TALA License ç»å¸¸æ€§çš„åœ¨ org mode ä¸­å¯¼å‡º html ,é‡åˆ°æœ€å¤šçš„é—®é¢˜æ˜¯,å½“æˆ‘ä»¬æŠŠ html å‘é€ç»™å…¶ä»–äººæ—¶,é‡Œé¢çš„å›¾ç‰‡å°±ä¸èƒ½æ‰“å¼€äº†.è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å‘é€å‡ºå»çš„ä»…æ˜¯ html ä»£ç , åªåŒ…æ‹¬äº†å›¾ç‰‡åœ°å€,ä¸åŒ…æ‹¬å›¾ç‰‡çš„å†…å®¹. ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,æˆ‘ä»¬å¯ä»¥åœ¨ç”Ÿæˆ html çš„åŒæ—¶å°†å›¾ç‰‡ä»¥base64çš„å½¢å¼ç›´æ¥åµŒå…¥è‡³htmlæ–‡ä»¶å†….\nd2 çš„ TALA å¸ƒå±€æ˜¯ä¸€ä¸ªæ”¶è´¹çš„å¸ƒå±€å¼•æ“,ä½†å¹¸è¿çš„æ˜¯å°½ç®¡ä»–æ”¶è´¹,ä½†æ˜¯å´å¼€æº.æˆ‘ä»¬ä»ç„¶å¯ä»¥ä¸‹è½½TALAå¼•æ“çš„äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶,åªä¸è¿‡åœ¨æœªæˆæƒçš„æ—¶å€™ä¼šåœ¨å›¾ç‰‡ä¸­ç”Ÿæˆ UNLICENSED COPY çš„æ°´å°.svgçš„æ°´å°å¾ˆå¥½å»é™¤,ç”¨text-modeæ‰“å¼€æ–‡ä»¶,æ‰¾åˆ°æ°´å°å­—æ ·åˆ é™¤å³å¯.åˆ©ç”¨ä¸Šé¢çš„åœ¨å°†å›¾ç‰‡è½¬æ¢æˆBASE64çš„æ—¶å€™æˆ‘ä»¬ä»…éœ€è¦å°† UNLICENSED COPY æ›¿æ¢æˆç©ºå°±å®Œæˆäº†æ°´å°å»é™¤äº†.\n;; html image base64 (defun org-html--format-image-old (source attributes info) (org-html-close-tag \u0026quot;img\u0026quot; (org-html--make-attribute-string (org-combine-plists (list :src source :alt (if (string-match-p (concat \u0026quot;^\u0026quot; org-preview-latex-image-directory) source) (org-html-encode-plain-text (org-find-text-property-in-string 'org-latex-src source)) (file-name-nondirectory source))) (if (string= \u0026quot;svg\u0026quot; (file-name-extension source)) (org-combine-plists '(:class \u0026quot;org-svg\u0026quot;) attributes '(:fallback nil)) attributes))) info)) (defun org-org-html--format-image (source attributes info) ;; doc (if (string-match \u0026quot;http\u0026quot; source) (org-html--format-image-old source attributes info) (format \u0026quot;\u0026lt;img src=\\\u0026quot;data:image/%s+xml;base64,%s\\\u0026quot;%s width=%s /\u0026gt;\u0026quot; (or (file-name-extension source) \u0026quot;\u0026quot;) (base64-encode-string (with-temp-buffer (insert-file-contents-literally source) (string-replace \u0026quot;UNLICENSED COPY\u0026quot; \u0026quot; \u0026quot; (buffer-string)))) (file-name-nondirectory source) \u0026quot;100%\u0026quot;))) (advice-add #'org-html--format-image :override #'org-org-html--format-image) ","permalink":"/posts/%E4%BD%BF%E7%94%A8d2%E7%BB%98%E5%9B%BE/","series":[],"tags":[],"title":"ä½¿ç”¨d2ç»˜å›¾"},{"authors":[],"categories":[],"content":"springcloud æ•´åˆ shardingsphere åŠ seata, ä¸ºåˆ†å¸ƒå¼äº‹åŠ¡çš„åœºæ™¯æä¾›äº†ååˆ†ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ\nå‚ç›´ vs æ°´å¹³ æ‹†åˆ† å‚ç›´åˆ†åº“ï¼ŒæŠŠå•ä¸€æ•°æ®åº“æŒ‰ä¸šåŠ¡è¿›è¡Œåˆ’åˆ†ï¼Œåšåˆ°ä¸“åº“ä¸“è¡¨\nå‚ç›´åˆ†è¡¨ï¼ŒæŠŠè¡¨ä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®åˆ—å­˜å‚¨åˆ°ä¸€å¼ è¡¨ï¼Œå†å°†å¦å¤–ä¸€éƒ¨åˆ†æ•°æ®åˆ—å­˜å‚¨åˆ°å¦å¤–ä¸€å¼ æˆ–å¤šå¼ è¡¨ï¼Œè¿™ç§æ–¹å¼å«å‚ç›´åˆ†è¡¨\nå‚ç›´åˆ†ï¼Œéƒ½æ˜¯åˆ‡åˆ†è¡¨å¤´ï¼Œæ›´å¤šè€ƒè™‘å¾®æœåŠ¡åˆ’åˆ†å’Œæ•°æ®åº“è®¾è®¡ã€‚\næ°´å¹³åˆ†åº“ï¼Œè¡¨çš„æ•°æ®ä¸€éƒ¨åˆ†å­˜å‚¨åœ¨ä¸€ä¸ªæ•°æ®åº“ï¼Œå¦ä¸€éƒ¨åˆ†æ•°æ®å­˜å‚¨åœ¨å¦å¤–ä¸€ä¸ªæ•°æ®åº“ä¸­\næ°´å¹³åˆ†è¡¨ï¼Œè¡¨çš„æ•°æ®ä¸€éƒ¨åˆ†å­˜å‚¨åœ¨ä¸€ä¸ªè¡¨ï¼Œå¦ä¸€éƒ¨åˆ†æ•°æ®å­˜å‚¨åœ¨å¦å¤–ä¸€ä¸ªè¡¨ä¸­\næ°´å¹³åˆ†ï¼Œéƒ½æ˜¯åˆ‡è¡¨ä½“\nåˆ†åº“åˆ†è¡¨å¸¦æ¥çš„é—®é¢˜ï¼š\nè·¨èŠ‚ç‚¹è¿æ¥æŸ¥è¯¢é—®é¢˜ï¼Œåˆ†é¡µã€æ’åº å¤šæ•°æ®æºç®¡ç†é—®é¢˜ï¼Œ springcloud æ•´åˆ shardingsphere åŠ seata ä¾èµ– ä¾èµ–æˆ‘ä»¬é€‰æ‹©å¼•å…¥ã€spring-cloud-starter-alibaba-seata ä½œä¸º seata çš„èµ·æ­¥ä¾èµ–ã€sharding-jdbc-spring-boot-starter ä½œä¸º shardingshpere åˆ†åº“åˆ†è¡¨çš„æ ¸å¿ƒä¾èµ–ã€sharding-transaction-base-seata-at ä½œä¸º shardingsphere æ”¯æŒ seata-at æ¨¡å¼çš„ä¾èµ–\n\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba.cloud\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-cloud-starter-alibaba-seata\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;${depend on you springcloud version}\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.apache.shardingsphere\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;sharding-jdbc-spring-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.1.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.apache.shardingsphere\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;sharding-transaction-base-seata-at\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.1.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; æ•°æ®åº“ç¯å¢ƒ æ¨¡æ‹Ÿåˆ†åº“ï¼ˆæœ€å¸¸è§çš„æ–¹æ¡ˆï¼‰ï¼Œæ¨¡æ‹Ÿå°†æ•°æ®åˆ†åº“å­˜å‚¨è‡³ 2 ä¸ªä¸åŒçš„åº“ï¼Œé¦–å…ˆåˆ›å»ºå¥½ 2 ä¸ªæ•°æ®åº“ cube_ld_archetype_dev_1ã€cube_ld_archetype_dev_1ï¼Œå¹¶ä¸”åˆ›å»ºç›¸åŒçš„è¡¨ t_ld_daily_user_dã€‚\ndelimiter ; CREATE TABLE cube_ld_archetype_dev_1.t_ld_daily_user_d ( `id` bigint NOT NULL, `name` varchar(16) NOT NULL COMMENT 'å§“å', `dd_union_id` varchar(32) DEFAULT NULL COMMENT 'é’‰é’‰ id', `gender` tinyint NOT NULL COMMENT 'æ€§åˆ«ï¼Œ1 ç”· 2 å¥³', `mobile` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL, `phone` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL, `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´', `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´', `modifier` bigint NOT NULL DEFAULT '-1' COMMENT 'ä¿®æ”¹äºº', `creator` bigint NOT NULL DEFAULT '-1' COMMENT 'åˆ›å»ºäºº', `tenant_id` bigint NOT NULL DEFAULT '-1' COMMENT 'ç§Ÿæˆ·', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COMMENT='ç”¨æˆ·è¡¨'; CREATE TABLE cube_ld_archetype_dev_2.t_ld_daily_user_d ( `id` bigint NOT NULL, `name` varchar(16) NOT NULL COMMENT 'å§“å', `dd_union_id` varchar(32) DEFAULT NULL COMMENT 'é’‰ é’‰ id', `gender` tinyint NOT NULL COMMENT 'æ€§åˆ«ï¼Œ1 ç”· 2 å¥³', `mobile` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL, `phone` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL, `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´', `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´', `modifier` bigint NOT NULL DEFAULT '-1' COMMENT 'ä¿®æ”¹äºº', `creator` bigint NOT NULL DEFAULT '-1' COMMENT 'åˆ›å»ºäºº', `tenant_id` bigint NOT NULL DEFAULT '-1' COMMENT 'ç§Ÿæˆ·', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COMMENT='ç”¨æˆ·è¡¨'; ç”±äºä½¿ç”¨äº† seata çš„ at æ¨¡å¼ï¼Œå› æ­¤éœ€è¦åœ¨æ¯ä¸ªåº“åˆ›å»º undo_log è¡¨\ndelimiter ; CREATE TABLE IF NOT EXISTS cube_ld_archetype_dev_1.`undo_log` ( `branch_id` BIGINT NOT NULL COMMENT 'branch transaction id', `xid` VARCHAR(128) NOT NULL COMMENT 'global transaction id', `context` VARCHAR(128) NOT NULL COMMENT 'undo_log context,such as serialization', `rollback_info` LONGBLOB NOT NULL COMMENT 'rollback info', `log_status` INT(11) NOT NULL COMMENT '0:normal status,1:defense status', `log_created` DATETIME(6) NOT NULL COMMENT 'create datetime', `log_modified` DATETIME(6) NOT NULL COMMENT 'modify datetime', UNIQUE KEY `ux_undo_log` (`xid`, `branch_id`) ) ENGINE = InnoDB AUTO_INCREMENT = 1 DEFAULT CHARSET = utf8mb4 COMMENT ='AT transaction mode undo table'; ALTER TABLE cube_ld_archetype_dev_1.`undo_log` ADD INDEX `ix_log_created` (`log_created`); CREATE TABLE IF NOT EXISTS cube_ld_archetype_dev_2.`undo_log` ( `branch_id` BIGINT NOT NULL COMMENT 'branch transaction id', `xid` VARCHAR(128) NOT NULL COMMENT 'global transaction id', `context` VARCHAR(128) NOT NULL COMMENT 'undo_log context,such as serialization', `rollback_info` LONGBLOB NOT NULL COMMENT 'rollback info', `log_status` INT(11) NOT NULL COMMENT '0:normal status,1:defense status', `log_created` DATETIME(6) NOT NULL COMMENT 'create datetime', `log_modified` DATETIME(6) NOT NULL COMMENT 'modify datetime', UNIQUE KEY `ux_undo_log` (`xid`, `branch_id`) ) ENGINE = InnoDB AUTO_INCREMENT = 1 DEFAULT CHARSET = utf8mb4 COMMENT ='AT transaction mode undo table'; ALTER TABLE cube_ld_archetype_dev_2.`undo_log` ADD INDEX `ix_log_created` (`log_created`); ç¼–å†™é…ç½® ç”±äºä½¿ç”¨äº† springcloud-seata å’Œ springcloud-shardingsphere çš„ä¾èµ–ï¼Œå› æ­¤å¯ä»¥ç›´æ¥åœ¨æ³¨å†Œä¸­å¿ƒä¸Šè¿›è¡Œé…ç½®;\nå¯ä»¥ä½¿ç”¨ 2 ä¸ªé…ç½®æ–‡ä»¶æ¥è¿›è¡Œ seata å’Œ shardingsphere åˆ†å¼€é…ç½®ï¼›\nsharingsphere é…ç½®ä½¿ç”¨ tenant_id æ¥è¿›è¡Œåˆ†åº“ï¼›\nseata é…ç½®, æ­¤é…ç½®å¯åœ¨ nacos é…ç½®ä¸­å¿ƒå®Œæˆ\nseata: config: type: nacos nacos: server-addr: ${spring.cloud.nacos.config.server-addr} group: SEATA_GROUP namespace: ${spring.cloud.nacos.config.namespace} username: ${nacos.username} password: ${nacos.password} cluster: default data-id: seataServer.properties registry: type: nacos nacos: server-addr: ${spring.cloud.nacos.discovery.server-addr} group: SEATA_GROUP namespace: ${spring.cloud.nacos.discovery.namespace} username: ${nacos.username} password: ${nacos.password} application: seata-server cluster: default tx-service-group: default_tx_group service: vgroup-mapping: default_tx_group: default enable-auto-data-source-proxy: true data-source-proxy-mode: AT shardingsphere é…ç½®ï¼Œæ­¤é…ç½®å¯åœ¨ nacos é…ç½®ä¸­å¿ƒå®Œæˆ\nspring: jackson: time-zone: Asia/Shanghai cache: type: none shardingsphere: dataSource: names: ds1,ds2 ds1: type: com.zaxxer.hikari.HikariDataSource driverClassName: com.mysql.cj.jdbc.Driver jdbc-url: jdbc:mysql://dsip1:3306/cube_ld_archetype_dev_1?useUnicode=true\u0026amp;characterEncoding=UTF-8\u0026amp; serverTimezone=Asia/Shanghai\u0026amp;zeroDateTimeBehavior=convertToNull\u0026amp; autoReconnect=true\u0026amp;failOverReadOnly=false\u0026amp;maxReconnects=2\u0026amp;useSSL=false username: root password: xxx ds2: type: com.zaxxer.hikari.HikariDataSource driver-class-name: com.mysql.cj.jdbc.Driver jdbc-url: jdbc:mysql://dsip2:3306/cube_ld_archetype_dev_2?useUnicode=true\u0026amp;characterEncoding=UTF-8\u0026amp; serverTimezone=Asia/Shanghai\u0026amp;zeroDateTimeBehavior=convertToNull\u0026amp; autoReconnect=true\u0026amp;failOverReadOnly=false\u0026amp;maxReconnects=2\u0026amp;useSSL=false username: root password: xxx sharding: tables: t_ld_daily_user_d: database-strategy: inline: sharding-column: tenant_id algorithm-expression: ds$-\u0026gt;{tenant_id % 2 + 1} seata.conf è¿™ä¸€æ­¥æ˜¯ shardingsphere ä¸ seata æ•´åˆçš„é…ç½®ï¼Œæ­¤é…ç½®éœ€è¦åœ¨é¡¹ç›®çš„ resource ç›®å½•ä¸‹ï¼Œç›®å‰ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œä½†æ˜¯è¦å®ç°åœ¨ nacos ä¸Šé…ç½®ä¹Ÿä¸éš¾ã€‚\nsharding.transaction.seata.at.enable=true client.application.id=archetype client.transaction.service.group=default_tx_group ç¼–å†™ä»£ç  æ³¨æ„ï¼š@Transactional å’Œ @ShardingTransactionType æ³¨è§£å¿…é¡»åŒæ—¶æ·»åŠ æ‰èƒ½ä½¿åˆ†å¸ƒå¼äº‹åŠ¡ç”Ÿæ•ˆ TransactionType.BASE å…¶å®å°±æ˜¯ shardingsphere å¯¹äºå¼±ä¸€è‡´æ€§äº‹åŠ¡çš„å®šä¹‰ï¼Œåœ¨è¿™é‡Œå¯ç†è§£ TransactionType.BASE æ˜¯ seata at äº‹åŠ¡çš„æ˜ å°„ã€‚ å½“ç„¶é™¤äº†å¼±ä¸€è‡´æ€§ä»¥å¤–ï¼Œè¿˜æœ‰å¼ºä¸€è‡´æ€§ XA äº‹åŠ¡ï¼Œseata é»˜è®¤ä¹Ÿæ˜¯æ”¯æŒçš„ï¼Œåªæ˜¯ XA äº‹åŠ¡ä¾èµ–æ•°æ®åº“æ”¯æŒï¼Œåœ¨ä½¿ç”¨ XA äº‹åŠ¡æ—¶ä½ éœ€è¦æå‰ç¡®è®¤æ•°æ®åº“æ˜¯å¦æ”¯æŒ XA äº‹åŠ¡ã€‚\nåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œç¨‹åºæœ‰ä¸€ä¸ªé™¤é›¶é”™è¯¯ï¼Œæ•…æ„è®¾è®¡ä¸€ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬æœŸæœ›åˆ†å¸ƒå¼äº‹åŠ¡ç”Ÿæ•ˆçš„æƒ…å†µä¸‹ï¼Œèƒ½å›æ»š userMapper.insert(user1) è¿™è¡Œä»£ç å¯¹æ•°æ®åº“çš„æ“ä½œã€‚\n/** * save mutiple record * testing distributed transaction */ @PostMapping(\u0026quot;/saveTestShardingSphere\u0026quot;) @Transactional(rollbackFor = Exception.class) @ShardingTransactionType(TransactionType.BASE) public Result\u0026lt;Long\u0026gt; saveTestShardingSphere() { User user1 = new User(); user1.setId(1L); user1.setTenantId(1L); user1.setName(\u0026quot;van1\u0026quot;); user1.setGender(true); user1.setPhone(\u0026quot;7789\u0026quot;); user1.setDdUnionId(\u0026quot;7789\u0026quot;); userMapper.insert(user1); int errorInt = 1 / 0; User user2 = new User(); user2.setId(2L); user2.setTenantId(2L); user2.setName(\u0026quot;van2\u0026quot;); user2.setGender(true); user2.setPhone(\u0026quot;7789\u0026quot;); user2.setDdUnionId(\u0026quot;7789\u0026quot;); userMapper.insert(user2); return Result.success(); } å¯åŠ¨ seata-server seata çš„ AT äº‹åŠ¡è¦æ±‚ TC ä¸ RM èƒ½åŒå‘é€šè®¯ï¼Œå› æ­¤åœ¨åšæµ‹è¯•çš„æ—¶å€™ï¼Œå¸¸å¸¸éœ€è¦åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ª seata-serverï¼ˆTCï¼‰ä»¥ç¡®ä¿äº‹åŠ¡ç”Ÿæ•ˆã€‚\ncd $seata-server-home/bin sh seata-server.sh -p 8091 -h 172.20.10.2 -m file tail -f ../logs/start.out å¯åŠ¨ springcloud é¡¹ç›® mvn clean -T 1C install -f ../pom.xml -Dmaven.test.skrp=true -U java \\ -Xms1024m -Xmx1024m \\ -Dspring.application.name=archetype \\ -Dspring.cloud.nacos.config.file-extension=yml \\ -Duser.timezone=GMT+08 \\ -Dserver.port=8080 \\ -Dspring.cloud.nacos.discovery.server-addr=nacos:8848 \\ -Dspring.cloud.nacos.discovery.namespace=e29572d7-7ccc-4a18-81da-dbe891677336 \\ -Dspring.cloud.nacos.config.server-addr=nacos:8848 \\ -Dspring.cloud.nacos.config.namespace=e29572d7-7ccc-4a18-81da-dbe891677336 \\ -Dspring.config.import[0]=nacos:seata-at \\ -Dspring.config.import[1]=nacos:archetype-shardingjdbcDb \\ -Dspring.cloud.nacos.discovery.register-enabled=true \\ -Dlogging.level.com.baomidou.mybatisplus=DEBUG \\ -Dmybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl \\ -jar ./target/archetype.jar æ¥å£æµ‹è¯• å‘èµ·è¯·æ±‚æµ‹è¯•\nPOST http://localhost:8080/user/saveTestShardingSphere æ•°æ®åº“æŸ¥çœ‹\ndelimiter ; -- delete from cube_ld_archetype_dev_1.t_ld_daily_user_d; -- delete from cube_ld_archetype_dev_2.t_ld_daily_user_d; SELECT * FROM cube_ld_archetype_dev_1.t_ld_daily_user_d; SELECT * FROM cube_ld_archetype_dev_2.t_ld_daily_user_d; æ—¥å¿—\nBranch Rollbacked result: PhaseTwo_Rollbacked æ€»ç»“ shardingsphere ä¸ seata çš„æ•´åˆçš„ç¡®åšåˆ°äº†é…ç½®æ¸…æ™°ï¼Œä½¿ç”¨ç®€å•ï¼›\nå¼ºå¼ºè”åˆï¼Œä¸ºåˆ†å¸ƒå¼äº‹åŠ¡çš„åœºæ™¯æä¾›äº†ååˆ†ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼›\n","permalink":"/posts/seata-shardingsphere1/","series":[],"tags":[],"title":"springcloud æ•´åˆ shardingsphere åŠ seata"},{"authors":[],"categories":[],"content":"å¦‚ä½•æ’æŸ¥ï¼šjava.lang.OutOfMemoryError: unable to create native thread\njava.lang.OutOfMemoryError: unable to create native thread æµ‹è¯•ä»£ç  for (int i = 0; i \u0026lt; 3500; i++) { new Thread(() -\u0026gt; { try { try {Thread.sleep(5000L);} catch (InterruptedException e) {e.printStackTrace();} TimeUnit.HOURS.sleep(1); log.info(\u0026quot;\\n==== [log]: {} {}\u0026quot;, \u0026quot;sleep over\u0026quot;,Thread.currentThread().getName()); } catch (InterruptedException e) { e.printStackTrace(); } }).start(); } ç›¸å…³æŒ‡ä»¤ æŸ¥çœ‹è¿›ç¨‹çš„çº¿ç¨‹æ•°é‡\njstack -l PID | grep 'java.lang.Thread.State' | wc -l jstack -l PID | grep 'java.lang.Thread.State: RUNNABLE' | wc -l jstack -l PID | grep 'java.lang.Thread.State: TIMED_WAITING' | wc -l jstack -l PID | grep 'java.lang.Thread.State: WAITING' | wc -l jstack -l PID | grep 'java.lang.Thread.State:BLOCKED' | wc -l jstack -l PID | grep 'Java-level deadlock' | wc -l æŸ¥çœ‹è¿›ç¨‹çš„çº¿ç¨‹çŠ¶æ€\njstack -l PID | grep 'java.lang.Thread.State' æŸ¥çœ‹è¿›ç¨‹çš„çº¿ç¨‹ä¿¡æ¯\njstack -l PID è¿”å›ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°é˜»å¡çš„ä»£ç ä¿¡æ¯\n\u0026quot;Thread-4050\u0026quot; #4136 prio=5 os_prio=31 cpu=1.00ms elapsed=546.19s tid=0x0000000130247000 nid=0x354103 waiting on condition [0x00000004b9a2e000] java.lang.Thread.State: TIMED_WAITING (sleeping) at java.lang.Thread.sleep(java.base@11.0.13/Native Method) at java.lang.Thread.sleep(java.base@11.0.13/Thread.java:334) at java.util.concurrent.TimeUnit.sleep(java.base@11.0.13/TimeUnit.java:446) at com....controller.CommentsController$$M$_jr_0E50A6F6C7FE22B0_1 .lambda$0(CommentsController.java:129) at com....controller.CommentsController$$Lambda$964$$M$_jr_0E50A6F6C7FE22B0_1 /0x0000000800e11c40.run(Unknown Source) at java.lang.Thread.run(java.base@11.0.13/Thread.java:829) ","permalink":"/posts/java-oom/","series":[],"tags":[],"title":"java æ ˆæº¢å‡ºé—®é¢˜æ’æŸ¥"},{"authors":[],"categories":[],"content":"RocketMQä¸»è¦ç”± Producerã€Brokerã€Consumer ä¸‰éƒ¨åˆ†ç»„æˆï¼Œå…¶ä¸­Producer è´Ÿè´£ç”Ÿäº§æ¶ˆæ¯ï¼ŒConsumer è´Ÿè´£æ¶ˆè´¹æ¶ˆæ¯ï¼ŒBroker è´Ÿè´£å­˜å‚¨æ¶ˆæ¯ã€‚\nç®€ä»‹ é¡¹ç›®åœ°å€ï¼šhttps://github.com/apache/rocketmq/tree/master\nRocketMQä¸»è¦ç”± Producerã€Brokerã€Consumer ä¸‰éƒ¨åˆ†ç»„æˆï¼Œå…¶ä¸­Producer è´Ÿè´£ç”Ÿäº§æ¶ˆæ¯ï¼ŒConsumer è´Ÿè´£æ¶ˆè´¹æ¶ˆæ¯ï¼ŒBroker è´Ÿè´£å­˜å‚¨æ¶ˆæ¯ã€‚Broker åœ¨å®é™…éƒ¨ç½²è¿‡ç¨‹ä¸­å¯¹åº”ä¸€å°æœåŠ¡å™¨ï¼Œæ¯ä¸ª Broker å¯ä»¥å­˜å‚¨å¤šä¸ªTopicçš„æ¶ˆæ¯ï¼Œæ¯ä¸ªTopicçš„æ¶ˆæ¯ä¹Ÿå¯ä»¥åˆ†ç‰‡å­˜å‚¨äºä¸åŒçš„ Brokerã€‚Message Queue ç”¨äºå­˜å‚¨æ¶ˆæ¯çš„ç‰©ç†åœ°å€ï¼Œæ¯ä¸ªTopicä¸­çš„æ¶ˆæ¯åœ°å€å­˜å‚¨äºå¤šä¸ª Message Queue ä¸­ã€‚ConsumerGroup ç”±å¤šä¸ªConsumer å®ä¾‹æ„æˆã€‚\næ¶ˆæ¯çš„å‘å¸ƒæ˜¯æŒ‡æŸä¸ªç”Ÿäº§è€…å‘æŸä¸ªtopicå‘é€æ¶ˆæ¯ï¼›æ¶ˆæ¯çš„è®¢é˜…æ˜¯æŒ‡æŸä¸ªæ¶ˆè´¹è€…å…³æ³¨äº†æŸä¸ªtopicä¸­å¸¦æœ‰æŸäº›tagçš„æ¶ˆæ¯ï¼Œè¿›è€Œä»è¯¥topicæ¶ˆè´¹æ•°æ®ã€‚\næ¶æ„ NameServeræ˜¯ä¸€ä¸ªå‡ ä¹æ— çŠ¶æ€èŠ‚ç‚¹ï¼Œå¯é›†ç¾¤éƒ¨ç½²ï¼ŒèŠ‚ç‚¹ä¹‹é—´æ— ä»»ä½•ä¿¡æ¯åŒæ­¥ã€‚\nBrokeréƒ¨ç½²ç›¸å¯¹å¤æ‚ï¼ŒBrokeråˆ†ä¸ºMasterä¸Slaveï¼Œä¸€ä¸ªMasterå¯ä»¥å¯¹åº”å¤šä¸ªSlaveï¼Œä½†æ˜¯ä¸€ä¸ªSlaveåªèƒ½å¯¹åº”ä¸€ä¸ªMasterï¼ŒMasterä¸Slave çš„å¯¹åº”å…³ç³»é€šè¿‡æŒ‡å®šç›¸åŒçš„BrokerNameï¼Œä¸åŒçš„BrokerId æ¥å®šä¹‰ï¼ŒBrokerIdä¸º0è¡¨ç¤ºMasterï¼Œé0è¡¨ç¤ºSlaveã€‚Masterä¹Ÿå¯ä»¥éƒ¨ç½²å¤šä¸ªã€‚æ¯ä¸ªBrokerä¸NameServeré›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹å»ºç«‹é•¿è¿æ¥ï¼Œå®šæ—¶æ³¨å†ŒTopicä¿¡æ¯åˆ°æ‰€æœ‰NameServerã€‚ æ³¨æ„ï¼šå½“å‰RocketMQç‰ˆæœ¬åœ¨éƒ¨ç½²æ¶æ„ä¸Šæ”¯æŒä¸€Masterå¤šSlaveï¼Œä½†åªæœ‰BrokerId=1çš„ä»æœåŠ¡å™¨æ‰ä¼šå‚ä¸æ¶ˆæ¯çš„è¯»è´Ÿè½½ã€‚\nProducerä¸NameServeré›†ç¾¤ä¸­çš„å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆéšæœºé€‰æ‹©ï¼‰å»ºç«‹é•¿è¿æ¥ï¼Œå®šæœŸä»NameServerè·å–Topicè·¯ç”±ä¿¡æ¯ï¼Œå¹¶å‘æä¾›Topic æœåŠ¡çš„Masterå»ºç«‹é•¿è¿æ¥ï¼Œä¸”å®šæ—¶å‘Masterå‘é€å¿ƒè·³ã€‚Producerå®Œå…¨æ— çŠ¶æ€ï¼Œå¯é›†ç¾¤éƒ¨ç½²ã€‚\nConsumerä¸NameServeré›†ç¾¤ä¸­çš„å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆéšæœºé€‰æ‹©ï¼‰å»ºç«‹é•¿è¿æ¥ï¼Œå®šæœŸä»NameServerè·å–Topicè·¯ç”±ä¿¡æ¯ï¼Œå¹¶å‘æä¾›TopicæœåŠ¡çš„Masterã€Slaveå»ºç«‹é•¿è¿æ¥ï¼Œä¸”å®šæ—¶å‘Masterã€Slaveå‘é€å¿ƒè·³ã€‚Consumeræ—¢å¯ä»¥ä»Masterè®¢é˜…æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥ä»Slaveè®¢é˜…æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…åœ¨å‘Masteræ‹‰å–æ¶ˆæ¯æ—¶ï¼ŒMasteræœåŠ¡å™¨ä¼šæ ¹æ®æ‹‰å–åç§»é‡ä¸æœ€å¤§åç§»é‡çš„è·ç¦»ï¼ˆåˆ¤æ–­æ˜¯å¦è¯»è€æ¶ˆæ¯ï¼Œäº§ç”Ÿè¯»I/Oï¼‰ï¼Œä»¥åŠä»æœåŠ¡å™¨æ˜¯å¦å¯è¯»ç­‰å› ç´ å»ºè®®ä¸‹ä¸€æ¬¡æ˜¯ä»Masterè¿˜æ˜¯Slaveæ‹‰å–ã€‚\nRocketMQæ¶æ„ä¸Šä¸»è¦åˆ†ä¸ºå››éƒ¨åˆ†ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤º:\nProducerï¼šæ¶ˆæ¯å‘å¸ƒçš„è§’è‰²ï¼Œæ”¯æŒåˆ†å¸ƒå¼é›†ç¾¤æ–¹å¼éƒ¨ç½²ã€‚Produceré€šè¿‡MQçš„è´Ÿè½½å‡è¡¡æ¨¡å—é€‰æ‹©ç›¸åº”çš„Brokeré›†ç¾¤é˜Ÿåˆ—è¿›è¡Œæ¶ˆæ¯æŠ•é€’ï¼ŒæŠ•é€’çš„è¿‡ç¨‹æ”¯æŒå¿«é€Ÿå¤±è´¥å¹¶ä¸”ä½å»¶è¿Ÿã€‚\nConsumerï¼šæ¶ˆæ¯æ¶ˆè´¹çš„è§’è‰²ï¼Œæ”¯æŒåˆ†å¸ƒå¼é›†ç¾¤æ–¹å¼éƒ¨ç½²ã€‚æ”¯æŒä»¥pushæ¨ï¼Œpullæ‹‰ä¸¤ç§æ¨¡å¼å¯¹æ¶ˆæ¯è¿›è¡Œæ¶ˆè´¹ã€‚åŒæ—¶ä¹Ÿæ”¯æŒé›†ç¾¤æ–¹å¼å’Œå¹¿æ’­æ–¹å¼çš„æ¶ˆè´¹ï¼Œå®ƒæä¾›å®æ—¶æ¶ˆæ¯è®¢é˜…æœºåˆ¶ï¼Œå¯ä»¥æ»¡è¶³å¤§å¤šæ•°ç”¨æˆ·çš„éœ€æ±‚ã€‚\nNameServerï¼šNameServeræ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„Topicè·¯ç”±æ³¨å†Œä¸­å¿ƒï¼Œå…¶è§’è‰²ç±»ä¼¼Dubboä¸­çš„zookeeperï¼Œæ”¯æŒBrokerçš„åŠ¨æ€æ³¨å†Œä¸å‘ç°ã€‚ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªåŠŸèƒ½ï¼šBrokerç®¡ç†ï¼ŒNameServeræ¥å—Brokeré›†ç¾¤çš„æ³¨å†Œä¿¡æ¯å¹¶ä¸”ä¿å­˜ä¸‹æ¥ä½œä¸ºè·¯ç”±ä¿¡æ¯çš„åŸºæœ¬æ•°æ®ã€‚ç„¶åæä¾›å¿ƒè·³æ£€æµ‹æœºåˆ¶ï¼Œæ£€æŸ¥Brokeræ˜¯å¦è¿˜å­˜æ´»ï¼›è·¯ç”±ä¿¡æ¯ç®¡ç†ï¼Œæ¯ä¸ªNameServerå°†ä¿å­˜å…³äºBrokeré›†ç¾¤çš„æ•´ä¸ªè·¯ç”±ä¿¡æ¯å’Œç”¨äºå®¢æˆ·ç«¯æŸ¥è¯¢çš„é˜Ÿåˆ—ä¿¡æ¯ã€‚ç„¶åProducerå’ŒConumseré€šè¿‡NameServerå°±å¯ä»¥çŸ¥é“æ•´ä¸ªBrokeré›†ç¾¤çš„è·¯ç”±ä¿¡æ¯ï¼Œä»è€Œè¿›è¡Œæ¶ˆæ¯çš„æŠ•é€’å’Œæ¶ˆè´¹ã€‚NameServeré€šå¸¸ä¹Ÿæ˜¯é›†ç¾¤çš„æ–¹å¼éƒ¨ç½²ï¼Œå„å®ä¾‹é—´ç›¸äº’ä¸è¿›è¡Œä¿¡æ¯é€šè®¯ã€‚Brokeræ˜¯å‘æ¯ä¸€å°NameServeræ³¨å†Œè‡ªå·±çš„è·¯ç”±ä¿¡æ¯ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªNameServerå®ä¾‹ä¸Šé¢éƒ½ä¿å­˜ä¸€ä»½å®Œæ•´çš„è·¯ç”±ä¿¡æ¯ã€‚å½“æŸä¸ªNameServerå› æŸç§åŸå› ä¸‹çº¿äº†ï¼ŒBrokerä»ç„¶å¯ä»¥å‘å…¶å®ƒNameServeråŒæ­¥å…¶è·¯ç”±ä¿¡æ¯ï¼ŒProducerå’ŒConsumerä»ç„¶å¯ä»¥åŠ¨æ€æ„ŸçŸ¥Brokerçš„è·¯ç”±çš„ä¿¡æ¯ã€‚\nBrokerServerï¼šBrokerä¸»è¦è´Ÿè´£æ¶ˆæ¯çš„å­˜å‚¨ã€æŠ•é€’å’ŒæŸ¥è¯¢ä»¥åŠæœåŠ¡é«˜å¯ç”¨ä¿è¯ï¼Œä¸ºäº†å®ç°è¿™äº›åŠŸèƒ½ï¼ŒBrokeråŒ…å«äº†ä»¥ä¸‹å‡ ä¸ªé‡è¦å­æ¨¡å—ã€‚\nRemoting Moduleï¼šæ•´ä¸ªBrokerçš„å®ä½“ï¼Œè´Ÿè´£å¤„ç†æ¥è‡ªClientç«¯çš„è¯·æ±‚ã€‚ Client Managerï¼šè´Ÿè´£ç®¡ç†å®¢æˆ·ç«¯(Producer/Consumer)å’Œç»´æŠ¤Consumerçš„Topicè®¢é˜…ä¿¡æ¯ã€‚ Store Serviceï¼šæä¾›æ–¹ä¾¿ç®€å•çš„APIæ¥å£å¤„ç†æ¶ˆæ¯å­˜å‚¨åˆ°ç‰©ç†ç¡¬ç›˜å’ŒæŸ¥è¯¢åŠŸèƒ½ã€‚ HA Serviceï¼šé«˜å¯ç”¨æœåŠ¡ï¼Œæä¾›Master Broker å’Œ Slave Brokerä¹‹é—´çš„æ•°æ®åŒæ­¥åŠŸèƒ½ã€‚ Index Serviceï¼šæ ¹æ®ç‰¹å®šçš„Message keyå¯¹æŠ•é€’åˆ°Brokerçš„æ¶ˆæ¯è¿›è¡Œç´¢å¼•æœåŠ¡ï¼Œä»¥æä¾›æ¶ˆæ¯çš„å¿«é€ŸæŸ¥è¯¢ã€‚ éƒ¨ç½² ç»“åˆéƒ¨ç½²æ¶æ„å›¾ï¼Œæè¿°é›†ç¾¤å·¥ä½œæµç¨‹ï¼š\nå¯åŠ¨NameServerï¼ŒNameServerèµ·æ¥åç›‘å¬ç«¯å£ï¼Œç­‰å¾…Brokerã€Producerã€Consumerè¿ä¸Šæ¥ï¼Œç›¸å½“äºä¸€ä¸ªè·¯ç”±æ§åˆ¶ä¸­å¿ƒã€‚ Brokerå¯åŠ¨ï¼Œè·Ÿæ‰€æœ‰çš„NameServerä¿æŒé•¿è¿æ¥ï¼Œå®šæ—¶å‘é€å¿ƒè·³åŒ…ã€‚å¿ƒè·³åŒ…ä¸­åŒ…å«å½“å‰Brokerä¿¡æ¯(IP+ç«¯å£ç­‰)ä»¥åŠå­˜å‚¨æ‰€æœ‰Topicä¿¡æ¯ã€‚æ³¨å†ŒæˆåŠŸåï¼ŒNameServeré›†ç¾¤ä¸­å°±æœ‰Topicè·ŸBrokerçš„æ˜ å°„å…³ç³»ã€‚ æ”¶å‘æ¶ˆæ¯å‰ï¼Œå…ˆåˆ›å»ºTopicï¼Œåˆ›å»ºTopicæ—¶éœ€è¦æŒ‡å®šè¯¥Topicè¦å­˜å‚¨åœ¨å“ªäº›Brokerä¸Šï¼Œä¹Ÿå¯ä»¥åœ¨å‘é€æ¶ˆæ¯æ—¶è‡ªåŠ¨åˆ›å»ºTopicã€‚ Producerå‘é€æ¶ˆæ¯ï¼Œå¯åŠ¨æ—¶å…ˆè·ŸNameServeré›†ç¾¤ä¸­çš„å…¶ä¸­ä¸€å°å»ºç«‹é•¿è¿æ¥ï¼Œå¹¶ä»NameServerä¸­è·å–å½“å‰å‘é€çš„Topicå­˜åœ¨å“ªäº›Brokerä¸Šï¼Œè½®è¯¢ä»é˜Ÿåˆ—åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªé˜Ÿåˆ—ï¼Œç„¶åä¸é˜Ÿåˆ—æ‰€åœ¨çš„Brokerå»ºç«‹é•¿è¿æ¥ä»è€Œå‘Brokerå‘æ¶ˆæ¯ã€‚ Consumerè·ŸProducerç±»ä¼¼ï¼Œè·Ÿå…¶ä¸­ä¸€å°NameServerå»ºç«‹é•¿è¿æ¥ï¼Œè·å–å½“å‰è®¢é˜…Topicå­˜åœ¨å“ªäº›Brokerä¸Šï¼Œç„¶åç›´æ¥è·ŸBrokerå»ºç«‹è¿æ¥é€šé“ï¼Œå¼€å§‹æ¶ˆè´¹æ¶ˆæ¯ã€‚ å•èŠ‚ç‚¹éƒ¨ç½² è®¾ç½®ç¯å¢ƒå˜é‡ 1 set -x ROCKETMQ_HOME /Users/van/soft/rocketMQ ä¸‹è½½é¡¹ç›®è‡³ROCKETMQ_HOMEæ–‡ä»¶ç›®å½•ï¼Œ\nhttps://github.com/apache/rocketmq/tree/master\nä¸‹è½½é¡¹ç›®è‡³ROCKETMQ_HOMEæ–‡ä»¶ç›®å½•ï¼Œ\nhttps://github.com/apache/rocketmq-dashboard\nå¯åŠ¨NameServer 1 nohup sh $ROCKETMQ_HOME/rocketmq-4.9.3/bin/mqnamesrv \u0026amp; 2 tail -f ~/logs/rocketmqlogs/namesrv.log 3 jps å¯åŠ¨borkerServer 1 nohup sh $ROCKETMQ_HOME/rocketmq-4.9.3/bin/mqbroker -n localhost:9876 \u0026amp; 2 tail -f ~/logs/rocketmqlogs/broker.log 3 jps å¯åŠ¨ç®¡ç†ç«¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/apache/rocketmq-dashboard\nä¿®æ”¹nameserveråœ°å€ï¼Œapplication.yml\n1 ... 2 namesrvAddrs: 3 - 127.0.0.1:9876 4 ... å¯åŠ¨å‘½ä»¤\nmvn springboot:run è®¿é—®åœ°å€ï¼šhttp://localhost:8080/#/topic\næ¶ˆæ¯å‘é€å’Œæ¶ˆè´¹æµ‹è¯• 1 #bash 2 export NAMESRV_ADDR=localhost:9876 3 #fish 4 set -x NAMESRV_ADDR localhost:9876 5 sh $ROCKETMQ_HOME/rocketmq-4.9.3/bin/tools.sh org.apache.rocketmq.example.quickstart.Producer 6 sh $ROCKETMQ_HOME/rocketmq-4.9.3/bin/tools.sh org.apache.rocketmq.example.quickstart.Consumer å¤åˆ¶å’Œåˆ·ç›˜ç­–ç•¥ å¤åˆ¶ç­–ç•¥ï¼šåŒæ­¥å¤åˆ¶ã€å¼‚æ­¥å¤åˆ¶ï¼Œbroker masterä¸ slaver ä¹‹é—´æ•°æ®åŒæ­¥ç­–ç•¥\nåˆ·ç›˜ç­–ç•¥ï¼šåŒæ­¥åˆ·ç›˜ã€å¼‚æ­¥åˆ·ç›˜ï¼Œå¼‚æ­¥åˆ·ç›˜ä¸€èˆ¬æ˜¯å°†æ•°æ®å­˜å‚¨è‡³pageCache,è¾¾åˆ°ä¸€å®šæ•°é‡æ—¶è‡ªåŠ¨è¿›è¡Œè½ç›˜\nblocker é›†ç¾¤æ¨¡å¼ å•Master åªæœ‰ä¸€ä¸ªblockerï¼Œåªèƒ½åœ¨æµ‹è¯•æ—¶ä½¿ç”¨ï¼Œæœ‰å•ç‚¹æ•…éšœ\nå¤šMaster brokerä»…ç”±å¤šä¸ªmasteræ„æˆï¼Œä¸å­˜åœ¨slaverã€‚åŒä¸€ä¸ªtopicçš„å„ä¸ªqueueä¼šå¹³å‡åˆ†å¸ƒè‡³å¤šä¸ªmasterèŠ‚ç‚¹ã€‚\nä¼˜ç‚¹ï¼šé…ç½®ç®€å•ã€å•ä¸ªmasterå®•æœºå¯¹é›†ç¾¤æ²¡å½±å“ã€‚å‰ææ˜¯éœ€è¦é…ç½®ç£ç›˜é˜µåˆ—ã€‚raidç£ç›˜é˜µåˆ—çš„æ•ˆç‡è¦é«˜äºmaster-slaveré›†ç¾¤ï¼Œraidæ˜¯ç¡¬ä»¶æ”¯æŒï¼Œæˆæœ¬è¾ƒé«˜ã€‚\nç¼ºç‚¹ï¼šæœªæ¢å¤ä¹‹å‰ï¼Œè¯¥æœºå™¨ä¸Šçš„æ¶ˆæ¯ä¸èƒ½è¢«æ¶ˆè´¹ï¼Œæ¶ˆæ¯æ—¶æ—¶æ€§ä¼šå—åˆ°å½±å“ã€‚\nå¤šMasterå¤šSlaver-å¼‚æ­¥å¤åˆ¶ masterä¸slaverä¹‹é—´æ˜¯ä¸»å¤‡å…³ç³»ï¼Œå³masterè´Ÿè´£æ¶ˆæ¯çš„è¯»å†™è¯·æ±‚ï¼Œè€Œslaverä»…è´Ÿè´£æ¶ˆæ¯çš„å¤‡ä»½ï¼Œmaterå®•æœºåçš„è§’è‰²è‡ªåŠ¨åˆ‡æ¢ã€‚\nç”±äºæ˜¯å¼‚æ­¥è´Ÿè´£ï¼Œåœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæ¶‰åŠå°‘é‡æ¶ˆæ¯ä¸¢å¤±ã€‚å–å†³äºmasterå‘slaveråŒæ­¥æ•°æ®çš„æ—¶æœºã€‚\nå¤šMasterå¤šSlaver-åŒæ­¥åŒå†™ æ¶ˆæ¯å†™å…¥masteråï¼Œç­‰å¾…masterå°†ä¿¡æ¯åŒæ­¥è‡³slaveræˆåŠŸåï¼Œè¿”å›æˆåŠŸã€‚\nä¼˜ç‚¹ï¼šä¸å­˜åœ¨ä¸¢å¤±\nç¼ºç‚¹ï¼šå•ä¸ªæ¶ˆæ¯çš„RTé«˜ï¼Œå¯¼è‡´æ€§èƒ½è¦ç•¥ä½ï¼ˆçº¦10%ï¼‰ï¼Œmasterå®•æœºåä¸ä¼šè‡ªåŠ¨åˆ‡æ¢è‡³slaverã€‚\nRocketMqå·¥ä½œåŸç† æ¶ˆæ¯çš„ç”Ÿäº§è¿‡ç¨‹ Producerå‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œä¼šå…ˆå‘nameserverè¯·æ±‚æ¶ˆæ¯topicçš„è·¯ç”±ä¿¡æ¯ nameserverè¿”å›è¯¥topicçš„è·¯ç”±è¡¨å’Œbrokeråˆ—è¡¨\nè·¯ç”±è¡¨ï¼šmapï¼Œkeyä¸ºtopicåç§°ã€valueæ˜¯ä¸€ä¸ªqueueDataå®ä¾‹åˆ—è¡¨ï¼Œå³åªè¦æ¶‰åŠåˆ°è¯¥topicçš„brokerï¼Œä¸€ä¸ªbrokerå¯¹åº”ä¸€ä¸ªqueue,Queuedataä¸­åŒ…å«brokerNameã€‚ç®€å•æ¥è¯´ï¼Œè·¯ç”±è¡¨çš„valueä¸ºæ‰€æœ‰æ¶‰åŠè¯¥topicçš„brokerName\nrouterMap\u0026lt;topicName,List\u0026gt;,queueData: brokerName\nBorkeråˆ—è¡¨ï¼šMap\u0026lt;brokerNameã€brokerDataMap\u0026gt;, brokerDataMap\u0026lt;brokerId,brokerIp\u0026gt; Produceræ ¹æ®æ¶ˆæ¯çš„é€‰æ‹©ç­–ç•¥ï¼Œä»queueåˆ—è¡¨ä¸­é€‰å‡ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œç”¨äºåç»­å­˜å‚¨æ¶ˆæ¯ Producerå¯¹æ¶ˆæ¯åšä¸€äº›ç‰¹æ®Šå‡ºç†ï¼Œä¾‹å¦‚æ¶ˆæ¯è¶…è¿‡4Mï¼Œå¯¹æ¶ˆæ¯è¿›è¡Œå‹ç¼© producerå‘é€‰æ‹©å‡ºçš„queueæ‰€åœ¨çš„brokerå‘å‡ºrpcè¯·æ±‚ï¼Œå°†æ¶ˆæ¯å‘é€åˆ°é€‰æ‹©å‡ºçš„queue queueé€‰æ‹©ç®—æ³• è½®è¯¢ç®—æ³•ï¼Œæ¯ä¸ªqueueå¯å‡åŒ€æ”¶åˆ°æ¶ˆæ¯ï¼Œç”±äºéœ€è¦ç­‰åˆ°æŠ•é€’æˆåŠŸåæ‰èƒ½è¿›è¡Œä¸‹ä¸ªèŠ‚ç‚¹çš„è½®è¯¢ï¼Œå› æ­¤è¯¥ç®—æ³•å­˜åœ¨åœ¨ç”Ÿäº§è€…ç«¯æ¶ˆæ¯ç§¯å‹é—®é¢˜ï¼Œå½±å“æ¶ˆæ¯çš„æŠ•é€’æ€§èƒ½ã€‚ æœ€å°æŠ•é€’å»¶è¿Ÿç®—æ³•ï¼Œå°†æ¶ˆæ¯æŠ•é€’è‡³å»¶è¿Ÿæœ€å°çš„queue,å¯æœ‰æ•ˆæå‡æ¶ˆæ¯çš„æŠ•é€’æ€§èƒ½ã€‚é—®é¢˜æ˜¯å¯èƒ½å‡ºç°å•æœºè¿‡çƒ­ï¼Œæ¶ˆæ¯åˆ†é…ä¸å‡ã€‚ æ¶ˆæ¯å­˜å‚¨ æ•°æ®å­˜å‚¨åœ¨home/storeç›®å½•ä¸‹ï¼Œè¯¥ç›®å½•åœ¨å¯åŠ¨æ—¶åˆ›å»ºï¼Œæ­£å¸¸å…³é—­brokerè¯¥æ¶ˆæ¯ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œå¦‚æœå¯åŠ¨å‰å‘ç°æ­¤æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™è¯´æ˜ä¹‹å‰æ˜¯éæ­£å¸¸å…³é—­ã€‚ å…¶ä¸­å­˜å‚¨ç€commitlogæ–‡ä»¶ï¼Œè€Œæ¶ˆæ¯æ˜¯å†™åœ¨commitlogæ–‡ä»¶ä¸­çš„ configç›®å½•ï¼Œå­˜æ”¾ç€brokerè¿è¡ŒæœŸé—´çš„ä¸€äº›é…ç½®æ•°æ® consumequeue, å­˜å‚¨ç€æ¶ˆè´¹é˜Ÿåˆ— indexå­˜å‚¨ç€æ¶ˆæ¯ç´¢å¼•æ–‡ä»¶ lock:è¿è¡ŒæœŸé—´ä½¿ç”¨åˆ°çš„å…¨å±€èµ„æºé” commitlogæ–‡ä»¶ åç§»é‡ ç´¢å¼•æ–‡ä»¶ Reblance æ²¡æ¬¡æ–°å¢æˆ–è€…åˆ é™¤æ¶ˆè´¹è€…çš„æ—¶å€™éƒ½ä¼šè§¦å‘reblanceï¼Œreblanceä¼šå¯¼è‡´æ¶ˆæ¯ç§¯å‹å’Œæ¶ˆæ¯é‡å¤æ¶ˆè´¹çš„é—®é¢˜ã€‚\nå¦å¤–å¦‚æœæ¶ˆè´¹è€…æ•°é‡å¤§äºqueueæ—¶ï¼Œæ¶ˆæ¯åªä¼šè´Ÿè½½è‡³æœ‰é™çš„æ¶ˆè´¹è€…ï¼Œè¿™ä¸ªå«reblanceçš„é™åˆ¶\n","permalink":"/posts/rocketmqintroduction/","series":[],"tags":[],"title":"RocketMQ å¿…é¡»çŸ¥é“çš„ç†è®ºçŸ¥è¯†"},{"authors":[],"categories":[],"content":"ä½¿ç”¨ Emacs å¯¼å‡º html æ ·å¼ï¼Œç±»ä¼¼äº doom emacs doc çš„ css style\næ ·å¼å¼•ç”¨ï¼šhttps://docs.doomemacs.org/latest/#/modules\nä¸€ä¸ªç±» doom doc çš„ org html æ ·å¼æ¨¡ç‰ˆ ç‚¹æ­¤é¢„è§ˆğŸª„\nä½¿ç”¨ é…ç½® snippet æ¨¡ç‰ˆï¼Œç„¶ååœ¨ org mode æ–‡ä»¶ä¸­ä½¿ç”¨ tt tab å°±å¯å±•å¼€æ­¤æ¨¡ç‰ˆã€‚\n# -*- mode: snippet -*- # name: title # key: tt # -- #+title: `(file-name-sans-extension (buffer-name))` #+SUBTITLE: this is subtitle #+AUTHOR: autor #+HTML_HEAD: \u0026lt;script src=\u0026quot;scroll.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; #+HTML_HEAD: \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; type=\u0026quot;text/css\u0026quot; href=\u0026quot;org_css.css\u0026quot;/\u0026gt; #+HTML_HEAD: \u0026lt;script src=\u0026quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; #+OPTIONS: prop:nil timestamp:t \\n:t ^:nil f:t toc:t author:t num:t H:2 #+LATEX_COMPILER: xelatex #+LATEX_CLASS: elegantpaper #+MACRO: htmlred @@html:\u0026lt;font color=\u0026quot;red\u0026quot;\u0026gt;\u0026lt;/font\u0026gt;@@ #+MACRO: latexred @@latex:{\\color{red}@@@@latex:}@@ #+latex:\\newpage æƒ³ä½¿ç”¨åœ¨çº¿ç‰ˆçš„é™æ€æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„é…ç½®è¿›è¡Œæ›¿æ¢\n#+HTML_HEAD: \u0026lt;link href=\u0026quot;https://emacs-1308440781.cos.ap-chengdu.myqcloud.com/org_css.css\u0026quot; rel=\u0026quot;stylesheet\u0026quot;\u0026gt;\u0026lt;/link\u0026gt; #+HTML_HEAD: \u0026lt;script src=\u0026quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; #+HTML_HEAD: \u0026lt;script src=\u0026quot;https://emacs-1308440781.cos.ap-chengdu.myqcloud.com/scroll.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; å­—ä½“æ ·å¼ Table 1: å­—ä½“æ ·å¼è¯´æ˜ ç²—ä½“ bold æ–œä½“ italic ä¸‹åˆ’çº¿ underlined ä¸­æ¨ªçº¿ strike-through ä»£ç ï¼ŒæŒ‰é”® code ç‰¹æ®Šè¯´æ˜ quote æ‘˜è¦ã€å¼•ç”¨ å¯ä½¿ç”¨`quote`æ¥è¿›è¡Œä»£ç å—è¡¥å…¨ï¼Œè¡¨ç¤ºæ‘˜è¦ï¼Œå¼•ç”¨\nTECO - Tape [later text] Editor/COrrector\nA combination text editor/really horrible ProgrammingLanguage. To quote the paper â€œRealProgrammers donâ€™t use Pascalâ€ (1983):\nnotice æ³¨æ„äº‹é¡¹ã€æé†’ ä½ æœ‰è®¸å¤šå·²æ ‡è®°çš„é¡¹ç›®å¹¶ä¸”ä½ å¯èƒ½é”™è¿‡ä¸€ä¸ªé‡è¦çš„é¡¹ç›®æ—¶ï¼Œæé†’å¯ä»¥æä¾›å¸®åŠ©\nPlease do not file or answer Doom Emacs issues on Reddit, Twitter, or StackOverflow. Kindly refer them to this section.\nè¿™æ˜¯ 1 ä¸ªä¾‹å­\næ®µè½åŠé«˜äº® Example of an comment.\nåŸæ–‡ï¼šç”¨å‹ bip äº§å“åŠŸèƒ½è¯´æ˜ ï¼Œåœ¨è¯´æ˜æ–‡æ¡£\nå¤§æ•°æ®ä¸­ æœ€å®è´µ ã€æœ€éš¾ä»¥ä»£æ›¿çš„å°±æ˜¯æ•°æ®ï¼Œä¸€åˆ‡éƒ½å›´ç»•æ•°æ®ã€‚\nHDFS æ˜¯æœ€æ—©çš„å¤§æ•°æ®å­˜å‚¨ç³»ç»Ÿï¼Œå­˜å‚¨ç€å®è´µçš„æ•°æ®èµ„äº§ï¼Œå„ç§æ–°ç®—æ³•ã€æ¡†æ¶è¦æƒ³å¾—åˆ°å¹¿æ³›ä½¿ç”¨ï¼Œå¿…é¡»æ”¯æŒ HDFSï¼Œæ‰èƒ½è·å–å·²å­˜å‚¨åœ¨é‡Œé¢çš„æ•°æ®ã€‚æ‰€ä»¥å¤§æ•°æ®æŠ€æœ¯è¶Šå‘å±•ï¼Œæ–°æŠ€æœ¯è¶Šå¤šï¼ŒHDFS å¾—åˆ°çš„æ”¯æŒè¶Šå¤šï¼Œè¶Šç¦»ä¸å¼€ HDFSã€‚HDFS ä¹Ÿè®¸ä¸æ˜¯æœ€å¥½çš„å¤§æ•°æ®å­˜å‚¨æŠ€æœ¯ï¼Œä½†ä¾ç„¶æ˜¯æœ€é‡è¦çš„å¤§æ•°æ®å­˜å‚¨æŠ€æœ¯ã€‚\nHDFS æ˜¯å¦‚ä½•å®ç°å¤§æ•°æ®é«˜é€Ÿã€å¯é çš„å­˜å‚¨å’Œè®¿é—®çš„å‘¢ï¼Ÿ\nHadoop åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ HDFS çš„è®¾è®¡ç›®æ ‡æ˜¯ç®¡ç†æ•°ä»¥åƒè®¡çš„æœåŠ¡å™¨ã€æ•°ä»¥ä¸‡è®¡çš„ç£ç›˜ï¼Œå°†å¤§è§„æ¨¡çš„æœåŠ¡å™¨è®¡ç®—èµ„æºå½“ä½œä¸€ä¸ªå•ä¸€å­˜å‚¨ç³»ç»Ÿè¿›è¡Œç®¡ç†ï¼Œå¯¹åº”ç”¨ç¨‹åºæä¾›æ•°ä»¥ PB è®¡çš„å­˜å‚¨å®¹é‡ï¼Œè®©åº”ç”¨ç¨‹åºåƒä½¿ç”¨æ™®é€šæ–‡ä»¶ç³»ç»Ÿä¸€æ ·å­˜å‚¨å¤§è§„æ¨¡çš„æ–‡ä»¶æ•°æ®ã€‚ è¡¨æ ¼ C-c ~ to convert to tabel.el table\nC-c ~ to convert to org table\norg table M-h M-l for move Columns left and right\norg table M-k M-j for move Rows up and down\n# table.el for merge Columns or Rows Table 2: square N N^2 N^3 N^4 sqrt(n) sqrt[4](N) 1 1 1 1 1 1 2 4 8 16 1.4142136 1.1892071 3 9 27 81 1.7320508 1.3160740 Table 3: student Student Prob 1 Prob 2 Prob 3 Total Note Maximum 10 15 25 50 10.0 Peter 10 8 23 41 8.2 Sam 2 4 3 9 1.8 Average \u0026#xa0; \u0026#xa0; \u0026#xa0; 25.0 \u0026#xa0; Table 4: long table Format Fine-grained-control Initial Effort Syntax simplicity Editor Support Integrations Ease-of-referencing Versatility Word Word^2 Word^3 Word^4 sqrt(Word) sqrt(sqrt(Word)) 2 2 LaTeX LaTeX^2 LaTeX^3 LaTeX^4 sqrt(LaTeX) sqrt(sqrt(LaTeX)) 4 3 Org Mode Org^2 Mode^2 Org^3 Mode^3 Org^4 Mode^4 sqrt(Org Mode) sqrt(sqrt(Org Mode)) 4 4 Markdown Markdown^2 Markdown^3 Markdown^4 sqrt(Markdown) sqrt(sqrt(Markdown)) 3 1 Markdown + Pandoc (Markdown + Pandoc)^2 (Markdown + Pandoc)^3 (Markdown + Pandoc)^4 sqrt(Markdown + Pandoc) sqrt(sqrt(Markdown + Pandoc)) 3 2 awk è¡¨æ ¼ aardvark 555-5553 1200/300 B alpo-net 555-3412 2400/1200/300 A barfly 555-7685 1200/300 A bites 555-1675 2400/1200/300 A camelot 555-0542 300 C core 555-2912 1200/300 C fooey 555-1234 2400/1200/300 B foot 555-6699 1200/300 B macfoo 555-6480 1200/300 A sdace 555-3430 2400/1200/300 A sabafoo 555-2127 1200/300 C /foo/ { print $0 } Table 5: ç­›é€‰å‡º foo åŒ¹é…çš„è¡Œ fooey 555-1234 2400/1200/300 B foot 555-6699 1200/300 B macfoo 555-6480 1200/300 A sabafoo 555-2127 1200/300 C è¡¨æ ¼è‡ªå¢ id 0 å­—æ®µå åç§° 1 age å¹´é¾„ 2 bir å‡ºç”Ÿå¹´æœˆæ—¥ #+tblfm: $1=@#-1 C-c C-c to execute it\nLaTex å…¬å¼ $\\mbox{éœ€æ±‚çš„ä»·æ ¼å¼¹æ€§ç³»æ•°} = \\frac{\\mbox{éœ€æ±‚çš„å˜åŠ¨ç‡}}{\\mbox{ä»·æ ¼çš„å˜åŠ¨ç‡}}$ $$\\mbox{éœ€æ±‚çš„ä»·æ ¼å¼¹æ€§ç³»æ•°} = \\frac{\\mbox{éœ€æ±‚çš„å˜åŠ¨ç‡}}{\\mbox{ä»·æ ¼çš„å˜åŠ¨ç‡}}$$\n$$\\begin{aligned} \\cos 3\\theta \u0026amp; = \\cos (2 \\theta + \\theta) \\ \u0026amp; = \\cos 2 \\theta \\cos \\theta - \\sin 2 \\theta \\sin \\theta \\ \u0026amp; = (2 \\cos ^2 \\theta -1) \\cos \\theta - (2 \\sin \\theta\\cos \\theta ) \\sin \\theta \\ \u0026amp; = 2 \\cos ^3 \\theta - \\cos \\theta - 2 \\sin ^2 \\theta \\cos \\theta \\ \u0026amp; = 2 \\cos ^3 \\theta - \\cos \\theta - 2 (1 - \\cos ^2 \\theta )\\cos \\theta \\ \u0026amp; = 4 \\cos ^3 \\theta -3 \\cos \\theta \\end{aligned} $$\nOrg ä»£ç  ä»£ç ç‰‡æ®µå¼€å¯è¡Œå·ï¼Œä¿®æ”¹ `~/.emacs.d/.local/straight/repos/org/lisp/ox-html.el`\n(let* ((code-lines (split-string code \u0026quot;\\n\u0026quot;)) (code-length (length code-lines)) (num-fmt (and num-start (format \u0026quot;%%%ds \u0026quot; (format \u0026quot;%%%ds: \u0026quot; Java ä»£ç  /** * @param request è°ƒç”¨çš„è¯·æ±‚å‚æ•° * @param needLog true éœ€è¦è®°å½•æ—¥å¿— false ä¸è®°å½•æ—¥å¿— * @return */ protected NcApiResponse runApply(NcApiRequest request, Boolean needLog) { NcApiResponse ncApiResponse = null; try { final NcApiRequest ncApiRequest = executeBefore(request); ncApiResponse = executeGetRequest(ncApiRequest); } catch (Exception e) { afterExecute(needLog, e, request, ncApiResponse); if (e instanceof BizException) { throw new BizException(\u0026quot;NC æç¤º\u0026quot;, ((BizException) e).getErrorMsg(), e); } else { throw new BizException(\u0026quot;NC å¼‚å¸¸\u0026quot;, e.getMessage()); } } return ncApiResponse; } babel java List\u0026lt;Integer\u0026gt; a = Arrays.asList(1, 2); List\u0026lt;Integer\u0026gt; a = Arrays.asList(1, 2); List\u0026lt;Integer\u0026gt; a = Arrays.asList(1, 2); List\u0026lt;Integer\u0026gt; a = Arrays.asList(1, 2); List\u0026lt;Integer\u0026gt; a = Arrays.asList(1, 2); return a; C-c C-c to execute it, but export to html will fail when the babel java result generated.\nå›¾ç‰‡ å¼•ç”¨æœ¬åœ°å›¾ç‰‡ å¼•ç”¨ç½‘ç»œå›¾ç‰‡ dot graphviz dot\ndot sk\nplantuml plantuml with style css\nplantuml æ›¿æ¢åŸç”Ÿæ ·å¼\nDARKO RANGE/LIGHTORANGE/DARKBLUE/LIGHTBLUE/DARKRED/LIGHTRED/DARKGREEN/LIGHTGREEN\n!define LIGHTORANGE !includeurl C4-PlantUML/juststyle.puml plant uml ç³»ç»Ÿ Contex æ¶æ„å›¾\nplantuml æ›¿æ¢åŸç”Ÿæ ·å¼\nDARKORANGE/LIGHTORANGE/DARKBLUE/LIGHTBLUE/DARKRED/LIGHTRED/DARKGREEN/LIGHTGREEN\n!define LIGHTBLUE !includeurl C4-PlantUML/juststyle.puml æ³³é“å›¾\nplantuml htmlstyle\norg è½¬ Word pandoc -o ~/Desktop/out.docx ~/.doom.d/README.org æ’å…¥æ—¶é—´ C-c . æ’å…¥å½“å‰æ—¶é—´ \u0026lt;2023-02-25 Sat\u0026gt; K lask week J next week L next day ","permalink":"/posts/orgmodecss/","series":[],"tags":[],"title":"æ¨èä¸€æ¬¾ org mode å¯¼å‡º html çš„æ ·å¼"}]